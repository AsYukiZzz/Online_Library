<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="xyz.uz.mapper.BookMapper">
    <select id="pageQuery" resultType="xyz.uz.domain.vo.BookVO">
        select
            id,
            name,
            author,
            intro,
            ISBN,
            amount,
            category,
            is_popular,
            create_user,
            create_time,
            update_user,
            update_time,
            version
        from
            book
        <where>
            <if test="bookQuery.name != null and bookQuery.name != ''">and name like concat('%',#{bookQuery.name},'%')</if>
            <if test="bookQuery.author != null and bookQuery.author != ''">and author like concat('%',#{bookQuery.author},'%')</if>
            <if test="bookQuery.ISBN != null and bookQuery.ISBN != ''">and ISBN like concat('%',#{bookQuery.ISBN},'%')</if>
            <if test="bookQuery.category != null and bookQuery.category != ''">and category = #{bookQuery.category}</if>
            <if test="bookQuery.isPopular != null and bookQuery.isPopular != ''">and is_popular = #{bookQuery.isPopular}</if>
        </where>
    </select>

    <delete id="deleteBatch">
        delete from book where id in
        <foreach collection="ids" item="id" open="(" close=")" separator=",">
            #{id}
        </foreach>
    </delete>
</mapper>
